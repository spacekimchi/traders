{% extends "base.html" %}

{% block title %}
    Trades
{% endblock title %}

{% block content %}
    {% if logged_in %}
        <form action="/trades/process_trades" method="post">
            <button type="submit" class="button submit-form-button">Process Pending Executions</button>
        </form>
    {% endif %}
    <div>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Account</th>
                    <th>PnL</th>
                    <th>Ticker</th>
                    <th>Duration Seconds</th>
                    <th>Side</th>
                    <th>Entry Time</th>
                </tr>
            </thead>
            <tbody>
                {% for trade in trades_in_range %}
                    <tr>
                        <td>{{ trade.id }}</td>
                        <td>{{ trade.account_name }}</td>
                        <td class="{{ trade.pnl | pnl_class }}">{{ trade.pnl | currency_format }}</td>
                        <td>{{ trade.ticker }}</td>
                        <td>{{ trade.duration | excel_to_seconds }}</td>
                        <td>
                            {% if trade.is_long %}
                                LONG
                            {% else %}
                                SHORT
                            {% endif %}
                        </td>
                        <td>{{ trade.entry_time | excel_to_utc }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock content %}
